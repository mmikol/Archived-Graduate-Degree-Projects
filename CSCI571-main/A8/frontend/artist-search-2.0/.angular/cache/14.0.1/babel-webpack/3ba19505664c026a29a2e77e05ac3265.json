{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/shared/artist-details-data.service\";\nimport * as i2 from \"src/shared/artist-artworks-data.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ArtistDetailsTabsComponent_div_0_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtext(1, \" No artworks. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33);\n    i0.ɵɵelement(2, \"img\", 34);\n    i0.ɵɵelementStart(3, \"div\", 35)(4, \"p\", 36);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 36);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function ArtistDetailsTabsComponent_div_0_div_27_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const artwork_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.expandArtistGenes(artwork_r5.id, artwork_r5.title, artwork_r5.image, artwork_r5.date));\n    });\n    i0.ɵɵtext(9, \"Categories\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const artwork_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", artwork_r5.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artwork_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r5.date);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"ul\", 16)(2, \"li\", 17)(3, \"button\", 18);\n    i0.ɵɵtext(4, \"Artist Info\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 17)(6, \"button\", 19);\n    i0.ɵɵtext(7, \"Artworks\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 20)(9, \"div\", 21)(10, \"p\", 22)(11, \"span\", 23);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 24);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 25);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"p\", 26);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\", 27);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 28);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 29);\n    i0.ɵɵtemplate(24, ArtistDetailsTabsComponent_div_0_div_24_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementStart(25, \"div\", 11)(26, \"div\", 12);\n    i0.ɵɵtemplate(27, ArtistDetailsTabsComponent_div_0_div_27_Template, 10, 3, \"div\", 30);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(ctx_r0.details.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r0.details.birthday, \" - \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.details.deathday, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.nationality);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.missing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.biography);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.artworks.length <= 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.artworks);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"div\", 39);\n    i0.ɵɵelement(2, \"img\", 40);\n    i0.ɵɵelementStart(3, \"div\", 41)(4, \"div\", 42)(5, \"p\", 43);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const gene_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", gene_r8.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(gene_r8.name);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtext(1, \" No categories. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class ArtistDetailsTabsComponent {\n  constructor(artistDetailsData, artistArtworksData) {\n    this.artistDetailsData = artistDetailsData;\n    this.artistArtworksData = artistArtworksData;\n    this.artworks = [];\n    this.genes = [];\n    this.details = new ArtistDetails({});\n    this.missing = '';\n    this.modalTitle = '';\n    this.modalThumbnail = '';\n    this.modalYear = '';\n    this.detailsLoaded = false;\n    this.artworksLoaded = false;\n    this.genesRequested = false;\n    this.showSpinner = false;\n  }\n\n  ngOnInit() {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded]) => {\n      this.detailsLoaded = detailsLoaded;\n      this.details = data;\n    });\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded]) => {\n      this.artworksLoaded = artworksLoaded;\n      this.artworks = data;\n    });\n  }\n\n  toggleSpinner() {\n    this.showSpinner = !this.showSpinner;\n  }\n\n  clearArtworkGenes() {\n    if (this.genesRequested) this.genesRequested = !this.genesRequested;\n    this.genes = [];\n  }\n\n  getArtistCategories(query) {\n    return _asyncToGenerator(function* () {\n      const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }];\n      return yield fetch(...config).then(response => {\n        return response.json();\n      }).then(parsed => parsed.map(item => {\n        return new ArtistGene(item);\n      }));\n    })();\n  }\n\n  expandArtistGenes(artistID, artworkTitle, artworkImage, artworkYear) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.clearArtworkGenes();\n\n      _this.toggleSpinner();\n\n      [_this.modalTitle, _this.modalThumbnail, _this.modalYear] = [artworkTitle, artworkImage, artworkYear];\n      _this.genes = yield _this.getArtistCategories(artistID);\n      _this.genesRequested = true;\n\n      _this.toggleSpinner();\n    })();\n  }\n\n}\n\nArtistDetailsTabsComponent.ɵfac = function ArtistDetailsTabsComponent_Factory(t) {\n  return new (t || ArtistDetailsTabsComponent)(i0.ɵɵdirectiveInject(i1.ArtistDetailsDataService), i0.ɵɵdirectiveInject(i2.ArtistArtworksDataService));\n};\n\nArtistDetailsTabsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ArtistDetailsTabsComponent,\n  selectors: [[\"app-artist-details-tabs\"]],\n  decls: 18,\n  vars: 7,\n  consts: [[\"class\", \"mx-auto w-75 mb-5\", 4, \"ngIf\"], [\"id\", \"geneModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"geneModal\", \"aria-hidden\", \"true\", 1, \"modal\", \"artwork-genes-list\", \"modal-lg\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-image\", 3, \"src\"], [\"id\", \"geneModal\", 1, \"modal-title\", \"text-start\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"row\", \"mt-2\"], [\"role\", \"status\", 1, \"spinner-border\", \"mx-auto\", 3, \"hidden\"], [1, \"card-columns\", \"pb-3\", \"mb-1\"], [1, \"row\"], [\"class\", \"col d-flex justify-content-center\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"alert alert-danger w-100 mx-auto\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"mx-auto\", \"w-75\", \"mb-5\"], [\"role\", \"tablist\", 1, \"nav\", \"nav-pills\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"id\", \"artist-details-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#details\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"details\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [\"id\", \"artworks-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#artworks\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"artworks\", \"aria-selected\", \"true\", 1, \"nav-link\"], [1, \"tab-content\", \"pt-3\"], [\"id\", \"details\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artist-details-tab\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"artist-info\", \"text-center\"], [1, \"artist-name\", \"fs-5\"], [1, \"artist-birthyear\", \"fs-5\"], [1, \"artist-deathyear\", \"fs-5\"], [1, \"artist-nationality\", \"text-center\"], [1, \"missing-artist-info\", \"text-center\", \"fs-5\"], [1, \"artist-biography\"], [\"id\", \"artworks\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artworks-tab\", 1, \"tab-pane\", \"fade\", \"artist-artworks-list\"], [\"class\", \"col d-flex justify-content-center mb-3\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"w-100\", \"mx-auto\"], [1, \"col\", \"d-flex\", \"justify-content-center\", \"mb-3\"], [1, \"card\", \"h-100\", \"d-flex\", \"flex-column\", \"justify-content-between\", \"artwork-card\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-footer\", \"text-muted\", \"mx-auto\", \"w-100\", \"pb-2\"], [1, \"text-center\", \"fs-6\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#geneModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"artwork-card-button\", \"active\", \"w-75\", 3, \"click\"], [1, \"col\", \"d-flex\", \"justify-content-center\"], [1, \"card\", \"gene-card\"], [1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"d-flex\", \"flex-column\", \"align-self-end\", \"pb-0\"], [1, \"mt-auto\", \"mx-auto\", \"w-100\", \"pb-2\"], [1, \"card-title\", \"mt-auto\", \"text-center\", \"fs-6\"]],\n  template: function ArtistDetailsTabsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ArtistDetailsTabsComponent_div_0_Template, 28, 8, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n      i0.ɵɵelement(5, \"img\", 5);\n      i0.ɵɵelementStart(6, \"p\", 6);\n      i0.ɵɵtext(7);\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"button\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 9);\n      i0.ɵɵelement(13, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 11)(15, \"div\", 12);\n      i0.ɵɵtemplate(16, ArtistDetailsTabsComponent_div_16_Template, 7, 2, \"div\", 13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(17, ArtistDetailsTabsComponent_div_17_Template, 2, 0, \"div\", 14);\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.detailsLoaded && ctx.artworksLoaded);\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.modalThumbnail, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.modalTitle);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.modalYear);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", !ctx.showSpinner);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.genes);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.genes.length <= 0 && ctx.genesRequested);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcnRpc3QtZGV0YWlscy10YWJzLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ArtistDetails","ArtistGene","i0","ArtistDetailsTabsComponent","constructor","artistDetailsData","artistArtworksData","ngOnInit","message","subscribe","data","detailsLoaded","details","artworksLoaded","artworks","toggleSpinner","showSpinner","clearArtworkGenes","genesRequested","genes","getArtistCategories","query","config","method","headers","fetch","then","response","json","parsed","map","item","expandArtistGenes","artistID","artworkTitle","artworkImage","artworkYear","modalTitle","modalThumbnail","modalYear","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.ts","/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { Artwork } from 'src/models/artwork';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport { ArtistDetailsDataService } from 'src/shared/artist-details-data.service';\nimport { ArtistArtworksDataService } from 'src/shared/artist-artworks-data.service';\n\n@Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})\nexport class ArtistDetailsTabsComponent implements OnInit {\n  public artworks: Array<Artwork> = []\n  public genes: Array<ArtistGene> = []\n  public details: ArtistDetails = new ArtistDetails({})\n  public missing: string = ''\n  public modalTitle: string = ''\n  public modalThumbnail: string = ''\n  public modalYear: string = ''\n  public detailsLoaded: boolean = false\n  public artworksLoaded: boolean = false\n  public genesRequested: boolean = false\n  public showSpinner: boolean = false\n\n  constructor(private artistDetailsData: ArtistDetailsDataService, private artistArtworksData: ArtistArtworksDataService) { }\n\n  ngOnInit(): void {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded])  => {\n      this.detailsLoaded = detailsLoaded\n      this.details = data  \n    })\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded])  => {\n      this.artworksLoaded = artworksLoaded\n      this.artworks = data\n    })\n  }\n\n  private toggleSpinner() {\n    this.showSpinner = !this.showSpinner\n  }\n\n  private clearArtworkGenes() {\n    if (this.genesRequested) this.genesRequested = !this.genesRequested;\n    this.genes = []\n  }\n  \n  public async getArtistCategories(query: string) {\n    const config = [\n      `https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`,\n      { method: 'GET', headers: { 'Content-Type': 'application/json' } },  \n    ] as const\n    return await fetch(...config)\n      .then(response => { return response.json() })\n      .then(parsed => parsed.map((item: Object) => { return new ArtistGene(item) }))\n  }\n\n  public async expandArtistGenes(artistID: string, artworkTitle: string, artworkImage: string, artworkYear: string) {\n    this.clearArtworkGenes()\n    this.toggleSpinner();\n    [this.modalTitle, this.modalThumbnail, this.modalYear] = [artworkTitle, artworkImage, artworkYear]\n    this.genes = await this.getArtistCategories(artistID)\n    this.genesRequested = true\n    this.toggleSpinner()\n  }\n}\n","<div class=\"mx-auto w-75 mb-5\" *ngIf=\"detailsLoaded && artworksLoaded\">\n    <ul class=\"nav nav-pills nav-fill\" role=\"tablist\">\n        <li class=\"nav-item\" role=\"presentation\">\n          <button class=\"nav-link active\" id=\"artist-details-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#details\" type=\"button\" role=\"tab\" aria-controls=\"details\" aria-selected=\"true\">Artist Info</button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\" id=\"artworks-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#artworks\" type=\"button\" role=\"tab\" aria-controls=\"artworks\" aria-selected=\"true\">Artworks</button>\n        </li>\n    </ul>\n    <div class=\"tab-content pt-3\">\n        <div class=\"tab-pane fade show active\" id=\"details\" role=\"tabpanel\" aria-labelledby=\"artist-details-tab\">\n            <p class=\"artist-info text-center\">\n                <span class=\"artist-name fs-5\">{{ details.name }}</span>\n                <span class=\"artist-birthyear fs-5\"> ({{ details.birthday }} - </span>\n                <span class=\"artist-deathyear fs-5\">{{ details.deathday }})</span>\n            </p>\n            <p class=\"artist-nationality text-center\">{{ details.nationality }}</p>\n            <p class=\"missing-artist-info text-center fs-5\">{{ missing }}</p>\n            <p class=\"artist-biography\">{{ details.biography }}</p>\n        </div>\n        <div class=\"tab-pane fade artist-artworks-list\" id=\"artworks\" role=\"tabpanel\" aria-labelledby=\"artworks-tab\">\n            <div class=\"alert alert-danger w-100 mx-auto\" role=\"alert\" *ngIf=\"artworks.length <= 0\">\n                No artworks.\n            </div>\n            <div class=\"card-columns pb-3 mb-1\">\n                <div class=\"row\">\n                    <div class=\"col d-flex justify-content-center mb-3\" *ngFor=\"let artwork of artworks\">\n                        <div class=\"card h-100 d-flex flex-column justify-content-between artwork-card\">\n                            <img class=\"card-img-top\" src=\"{{ artwork.image }}\" alt=\"Card image cap\">\n                            <div class=\"card-footer text-muted mx-auto w-100 pb-2\">\n                                <p class=\"text-center fs-6\">{{ artwork.title }}</p>\n                                <p class=\"text-center fs-6\">{{ artwork.date }}</p>    \n                                <button class=\"btn btn-primary btn-sm artwork-card-button active w-75\" data-bs-toggle=\"modal\" data-bs-target=\"#geneModal\" (click)=\"expandArtistGenes(artwork.id, artwork.title, artwork.image, artwork.date)\">Categories</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"modal artwork-genes-list modal-lg fade\" id=\"geneModal\" tabindex=\"-1\" aria-labelledby=\"geneModal\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            <img class=\"modal-image\" src=\"{{ modalThumbnail }}\">\n            <p class=\"modal-title text-start\" id=\"geneModal\">{{ modalTitle }}<br/>{{ modalYear }}</p>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n            <div class=\"row mt-2\">\n                <div class=\"spinner-border mx-auto\" role=\"status\" [hidden]=\"!showSpinner\"></div>      \n            </div>\n            <div class=\"card-columns pb-3 mb-1\">\n                <div class=\"row\">\n                    <div class=\"col d-flex justify-content-center\" *ngFor=\"let gene of genes\">\n                        <div class=\"card gene-card\">\n                            <img class=\"card-img-top\" src=\"{{ gene.image }}\">\n                            <div class=\"card-body d-flex flex-column align-self-end pb-0\">\n                                <div class=\"mt-auto mx-auto w-100 pb-2\">\n                                    <p class=\"card-title mt-auto text-center fs-6\">{{ gene.name }}</p>\n                                </div>\n                            </div>    \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"alert alert-danger w-100 mx-auto\" role=\"alert\" *ngIf=\"genes.length <= 0 && genesRequested\">\n                No categories.\n            </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  "]},"metadata":{},"sourceType":"module"}