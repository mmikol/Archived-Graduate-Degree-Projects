{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/shared/artist-details-data.service\";\nimport * as i2 from \"src/shared/artist-artworks-data.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ArtistDetailsTabsComponent_div_0_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelement(1, \"img\", 20);\n    i0.ɵɵelementStart(2, \"div\", 21)(3, \"p\", 22);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 23);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ArtistDetailsTabsComponent_div_0_div_27_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const artwork_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.expandArtistGenes(artwork_r2.artistID, artwork_r2.title, artwork_r2.image));\n    });\n    i0.ɵɵtext(8, \"Categories\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artwork_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", artwork_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artwork_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r2.date);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"ul\", 2)(2, \"li\", 3)(3, \"button\", 4);\n    i0.ɵɵtext(4, \"Artist Info\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 3)(6, \"button\", 5);\n    i0.ɵɵtext(7, \"Artworks\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"p\", 8)(11, \"span\", 9);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 10);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 11);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"p\", 12);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\", 13);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 14);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 15)(24, \"div\", 16);\n    i0.ɵɵtext(25, \" No artworks. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 17);\n    i0.ɵɵtemplate(27, ArtistDetailsTabsComponent_div_0_div_27_Template, 9, 3, \"div\", 18);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(ctx_r0.details.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" ( \", ctx_r0.details.birthday, \" - \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.details.deathday, \" )\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.nationality);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.missing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.biography);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r0.artworks.length > 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.artworks);\n  }\n}\n\nexport class ArtistDetailsTabsComponent {\n  constructor(artistDetailsData, artistArtworksData) {\n    this.artistDetailsData = artistDetailsData;\n    this.artistArtworksData = artistArtworksData;\n    this.artworks = [];\n    this.genes = [];\n    this.details = new ArtistDetails({});\n    this.missing = '';\n    this.modalTitle = '';\n    this.modalThumbnail = '';\n    this.detailsLoaded = false;\n    this.artworksLoaded = false;\n  }\n\n  ngOnInit() {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded]) => {\n      this.detailsLoaded = detailsLoaded;\n      const missing = [];\n      if (!data.biography) missing.push('No Biography');\n      if (!data.birthday) missing.push('No Birth Year');\n      if (!data.deathday) missing.push('No Death Year');\n      if (!data.name) missing.push('No Name');\n      if (!data.nationality) missing.push('No Nationality');\n      this.missing = missing.join(', ');\n      this.details = data;\n    });\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded]) => {\n      this.artworksLoaded = artworksLoaded;\n      this.artworks = data;\n    });\n  }\n\n  getArtistCategories(query) {\n    return _asyncToGenerator(function* () {\n      const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }];\n      return yield fetch(...config).then(response => {\n        return response.json();\n      }).then(parsed => parsed.map(item => {\n        return new ArtistGene(item);\n      }));\n    })();\n  }\n\n  expandArtistGenes(artistID, artworkTitle, artworkImage) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      [_this.modalTitle, _this.modalThumbnail] = [artworkTitle, artworkImage];\n      _this.genes = yield _this.getArtistCategories(artistID);\n    })();\n  }\n\n}\n\nArtistDetailsTabsComponent.ɵfac = function ArtistDetailsTabsComponent_Factory(t) {\n  return new (t || ArtistDetailsTabsComponent)(i0.ɵɵdirectiveInject(i1.ArtistDetailsDataService), i0.ɵɵdirectiveInject(i2.ArtistArtworksDataService));\n};\n\nArtistDetailsTabsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ArtistDetailsTabsComponent,\n  selectors: [[\"app-artist-details-tabs\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"mx-auto w-75 mb-5\", 4, \"ngIf\"], [1, \"mx-auto\", \"w-75\", \"mb-5\"], [\"role\", \"tablist\", 1, \"nav\", \"nav-pills\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"id\", \"artist-details-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#details\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"details\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [\"id\", \"artworks-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#artworks\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"artworks\", \"aria-selected\", \"true\", 1, \"nav-link\"], [1, \"tab-content\", \"pt-3\"], [\"id\", \"details\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artist-details-tab\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"artist-info\", \"text-center\"], [1, \"artist-name\", \"fs-5\"], [1, \"artist-birthyear\", \"fs-5\"], [1, \"artist-deathyear\", \"fs-5\"], [1, \"artist-nationality\", \"text-center\"], [1, \"missing-artist-info\", \"text-center\", \"fs-5\"], [1, \"artist-biography\"], [\"id\", \"artworks\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artworks-tab\", 1, \"tab-pane\", \"fade\", \"artist-artworks-list\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"w-100\", \"mx-auto\", 3, \"hidden\"], [1, \"card-group\", \"d-flex\", \"flex-row\", \"flex-nowrap\", \"justify-content-center\", \"pb-3\", \"mb-1\"], [\"class\", \"card artwork-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"artwork-card\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"pt-1\", \"pb-0\"], [1, \"card-title\", \"text-center\", \"fs-6\"], [1, \"card-subtitle\", \"text-center\", \"fs-6\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#geneModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"artwork-card-button\", \"active\", \"mb-2\", \"w-75\", \"mx-auto\", 3, \"click\"]],\n  template: function ArtistDetailsTabsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ArtistDetailsTabsComponent_div_0_Template, 28, 8, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.detailsLoaded && ctx.artworksLoaded);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcnRpc3QtZGV0YWlscy10YWJzLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ArtistDetails","ArtistGene","i0","ArtistDetailsTabsComponent","constructor","artistDetailsData","artistArtworksData","ngOnInit","message","subscribe","data","detailsLoaded","missing","biography","push","birthday","deathday","name","nationality","join","details","artworksLoaded","artworks","getArtistCategories","query","config","method","headers","fetch","then","response","json","parsed","map","item","expandArtistGenes","artistID","artworkTitle","artworkImage","modalTitle","modalThumbnail","genes","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.ts","/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { Artwork } from 'src/models/artwork';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport { ArtistDetailsDataService } from 'src/shared/artist-details-data.service';\nimport { ArtistArtworksDataService } from 'src/shared/artist-artworks-data.service';\n\n@Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})\nexport class ArtistDetailsTabsComponent implements OnInit {\n  public artworks: Array<Artwork> = []\n  public genes: Array<ArtistGene> = []\n  public details: ArtistDetails = new ArtistDetails({})\n  public missing: string = ''\n  public modalTitle: string = ''\n  public modalThumbnail: string = ''\n  public detailsLoaded: boolean = false\n  public artworksLoaded: boolean = false\n\n  constructor(private artistDetailsData: ArtistDetailsDataService, private artistArtworksData: ArtistArtworksDataService) { }\n\n  ngOnInit(): void {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded])  => {\n      this.detailsLoaded = detailsLoaded\n      const missing = []\n      if (!data.biography) missing.push('No Biography')\n      if (!data.birthday) missing.push('No Birth Year')\n      if (!data.deathday) missing.push('No Death Year')\n      if (!data.name) missing.push('No Name')\n      if (!data.nationality) missing.push('No Nationality')\n      this.missing = missing.join(', ')\n      this.details = data  \n    })\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded])  => {\n      this.artworksLoaded = artworksLoaded\n      this.artworks = data\n    })\n  }\n\n  public async getArtistCategories(query: string) {\n    const config = [\n      `https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`,\n      { method: 'GET', headers: { 'Content-Type': 'application/json' } },  \n    ] as const\n    return await fetch(...config)\n      .then(response => { return response.json() })\n      .then(parsed => parsed.map((item: Object) => { return new ArtistGene(item) }))\n  }\n\n  public async expandArtistGenes(artistID: string, artworkTitle: string, artworkImage: string) {\n    [this.modalTitle, this.modalThumbnail] = [artworkTitle, artworkImage]\n    this.genes = await this.getArtistCategories(artistID)\n  }\n}\n","<div class=\"mx-auto w-75 mb-5\" *ngIf=\"detailsLoaded && artworksLoaded\">\n    <ul class=\"nav nav-pills nav-fill\" role=\"tablist\">\n        <li class=\"nav-item\" role=\"presentation\">\n          <button class=\"nav-link active\" id=\"artist-details-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#details\" type=\"button\" role=\"tab\" aria-controls=\"details\" aria-selected=\"true\">Artist Info</button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\" id=\"artworks-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#artworks\" type=\"button\" role=\"tab\" aria-controls=\"artworks\" aria-selected=\"true\">Artworks</button>\n        </li>\n    </ul>\n    <div class=\"tab-content pt-3\">\n        <div class=\"tab-pane fade show active\" id=\"details\" role=\"tabpanel\" aria-labelledby=\"artist-details-tab\">\n            <p class=\"artist-info text-center\">\n                <span class=\"artist-name fs-5\">{{ details.name }}</span>\n                <span class=\"artist-birthyear fs-5\"> ( {{ details.birthday }} - </span>\n                <span class=\"artist-deathyear fs-5\">{{ details.deathday }} )</span>\n            </p>\n            <p class=\"artist-nationality text-center\">{{ details.nationality }}</p>\n            <p class=\"missing-artist-info text-center fs-5\">{{ missing }}</p>\n            <p class=\"artist-biography\">{{ details.biography }}</p>\n        </div>\n        <div class=\"tab-pane fade artist-artworks-list\" id=\"artworks\" role=\"tabpanel\" aria-labelledby=\"artworks-tab\">\n            <div class=\"alert alert-danger w-100 mx-auto\" role=\"alert\" [hidden]=\"artworks.length > 0\">\n                No artworks.\n            </div>              \n            <div class=\"card-group d-flex flex-row flex-nowrap justify-content-center pb-3 mb-1\">\n                <div class=\"card artwork-card\" *ngFor=\"let artwork of artworks\">\n                    <img class=\"card-img-top\" src=\"{{ artwork.image }}\" alt=\"Card image cap\">\n                    <div class=\"card-body pt-1 pb-0\">\n                        <p class=\"card-title text-center fs-6\">{{ artwork.title }}</p>\n                        <p class=\"card-subtitle text-center fs-6\">{{ artwork.date }}</p>\n                    </div>    \n                    <button class=\"btn btn-primary btn-sm artwork-card-button active mb-2 w-75 mx-auto\" data-bs-toggle=\"modal\" data-bs-target=\"#geneModal\" (click)=\"expandArtistGenes(artwork.artistID, artwork.title, artwork.image)\">Categories</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}