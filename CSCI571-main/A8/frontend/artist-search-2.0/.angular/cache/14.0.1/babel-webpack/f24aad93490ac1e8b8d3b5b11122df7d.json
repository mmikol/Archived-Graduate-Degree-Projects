{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ArtistGene } from 'src/models/artist-gene';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/shared/artist-details-data.service\";\nimport * as i2 from \"src/shared/artist-artworks-data.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ArtistDetailsTabsComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"img\", 19);\n    i0.ɵɵelementStart(2, \"div\", 20)(3, \"p\", 21);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ArtistDetailsTabsComponent_div_27_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const artwork_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.expandArtistGenes(artwork_r1.artistID, artwork_r1.title, artwork_r1.image));\n    });\n    i0.ɵɵtext(8, \"Categories\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artwork_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", artwork_r1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artwork_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r1.date);\n  }\n}\n\nexport class ArtistDetailsTabsComponent {\n  constructor(artistDetailsData, artistArtworksData) {\n    this.artistDetailsData = artistDetailsData;\n    this.artistArtworksData = artistArtworksData;\n  }\n\n  ngOnInit() {\n    this.artistDetailsData.message.subscribe(([data, loaded]) => {\n      if (loaded) {\n        this.loaded = loaded;\n        const missing = [];\n        if (!data.biography) missing.push('No Biography');\n        if (!data.birthday) missing.push('No Birth Year');\n        if (!data.deathday) missing.push('No Death Year');\n        if (!data.name) missing.push('No Name');\n        if (!data.nationality) missing.push('No Nationality');\n        this.missing = missing.join(', ');\n        this.details = data;\n      }\n    });\n    this.artistArtworksData.message.subscribe(data => this.artworks = data);\n  }\n\n  getArtistCategories(query) {\n    return _asyncToGenerator(function* () {\n      const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }];\n      return yield fetch(...config).then(response => {\n        return response.json();\n      }).then(parsed => parsed.map(item => {\n        return new ArtistGene(item);\n      }));\n    })();\n  }\n\n  expandArtistGenes(artistID, artworkTitle, artworkImage) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      [_this.modalTitle, _this.modalThumbnail] = [artworkTitle, artworkImage];\n      _this.genes = yield _this.getArtistCategories(artistID);\n    })();\n  }\n\n}\n\nArtistDetailsTabsComponent.ɵfac = function ArtistDetailsTabsComponent_Factory(t) {\n  return new (t || ArtistDetailsTabsComponent)(i0.ɵɵdirectiveInject(i1.ArtistDetailsDataService), i0.ɵɵdirectiveInject(i2.ArtistArtworksDataService));\n};\n\nArtistDetailsTabsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ArtistDetailsTabsComponent,\n  selectors: [[\"app-artist-details-tabs\"]],\n  decls: 28,\n  vars: 9,\n  consts: [[1, \"mx-auto\", \"w-75\", \"mb-5\", 3, \"hidden\"], [\"role\", \"tablist\", 1, \"nav\", \"nav-pills\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"id\", \"artist-details-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#details\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"details\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [\"id\", \"artworks-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#artworks\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"artworks\", \"aria-selected\", \"true\", 1, \"nav-link\"], [1, \"tab-content\", \"pt-3\"], [\"id\", \"details\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artist-details-tab\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"artist-info\", \"text-center\"], [1, \"artist-name\", \"fs-5\"], [1, \"artist-birthyear\", \"fs-5\"], [1, \"artist-deathyear\", \"fs-5\"], [1, \"artist-nationality\", \"text-center\"], [1, \"missing-artist-info\", \"text-center\", \"fs-5\"], [1, \"artist-biography\"], [\"id\", \"artworks\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artworks-tab\", 1, \"tab-pane\", \"fade\", \"artist-artworks-list\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"w-100\", \"mx-auto\", 3, \"hidden\"], [1, \"card-group\", \"d-flex\", \"flex-row\", \"flex-nowrap\", \"justify-content-center\", \"pb-3\", \"mb-1\"], [\"class\", \"card artwork-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"artwork-card\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"pt-1\", \"pb-0\"], [1, \"card-title\", \"text-center\", \"fs-6\"], [1, \"card-subtitle\", \"text-center\", \"fs-6\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#geneModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"artwork-card-button\", \"active\", \"mb-2\", \"w-75\", \"mx-auto\", 3, \"click\"]],\n  template: function ArtistDetailsTabsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"ul\", 1)(2, \"li\", 2)(3, \"button\", 3);\n      i0.ɵɵtext(4, \"Artist Info\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"li\", 2)(6, \"button\", 4);\n      i0.ɵɵtext(7, \"Artworks\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\", 6)(10, \"p\", 7)(11, \"span\", 8);\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"span\", 9);\n      i0.ɵɵtext(14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"span\", 10);\n      i0.ɵɵtext(16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"p\", 11);\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"p\", 12);\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"p\", 13);\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 14)(24, \"div\", 15);\n      i0.ɵɵtext(25, \" No artworks. \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\", 16);\n      i0.ɵɵtemplate(27, ArtistDetailsTabsComponent_div_27_Template, 9, 3, \"div\", 17);\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"hidden\", !ctx.detailsLoaded && !ctx.artworksLoaded);\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate(ctx.details.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" ( \", ctx.details.birthday, \" - \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.details.deathday, \" )\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.details.nationality);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.missing);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.details.biography);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", ctx.artworks.length > 0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.artworks);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcnRpc3QtZGV0YWlscy10YWJzLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ArtistGene","i0","ArtistDetailsTabsComponent","constructor","artistDetailsData","artistArtworksData","ngOnInit","message","subscribe","data","loaded","missing","biography","push","birthday","deathday","name","nationality","join","details","artworks","getArtistCategories","query","config","method","headers","fetch","then","response","json","parsed","map","item","expandArtistGenes","artistID","artworkTitle","artworkImage","modalTitle","modalThumbnail","genes","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.ts","/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { Artwork } from 'src/models/artwork';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport { ArtistDetailsDataService } from 'src/shared/artist-details-data.service';\nimport { ArtistArtworksDataService } from 'src/shared/artist-artworks-data.service';\n\n@Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})\nexport class ArtistDetailsTabsComponent implements OnInit {\n  public detailsLoaded!: boolean\n  public artworksLoaded!: boolean\n  public missing!: string\n  public details!: ArtistDetails\n  public artworks!: Array<Artwork>\n  public genes!: Array<ArtistGene>\n  public modalTitle!: string\n  public modalThumbnail!: string\n  constructor(private artistDetailsData: ArtistDetailsDataService, private artistArtworksData: ArtistArtworksDataService) { }\n\n  ngOnInit(): void {\n    this.artistDetailsData.message.subscribe(([data, loaded])  => {\n      if (loaded) {\n        this.loaded = loaded\n        const missing = []\n        if (!data.biography) missing.push('No Biography')\n        if (!data.birthday) missing.push('No Birth Year')\n        if (!data.deathday) missing.push('No Death Year')\n        if (!data.name) missing.push('No Name')\n        if (!data.nationality) missing.push('No Nationality')\n        this.missing = missing.join(', ')\n        this.details = data  \n      }\n    })\n    this.artistArtworksData.message.subscribe((data: Array<Artwork>) => this.artworks = data)\n  }\n\n  public async getArtistCategories(query: string) {\n    const config = [\n      `https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`,\n      { method: 'GET', headers: { 'Content-Type': 'application/json' } },  \n    ] as const\n    return await fetch(...config)\n      .then(response => { return response.json() })\n      .then(parsed => parsed.map((item: Object) => { return new ArtistGene(item) }))\n  }\n\n  public async expandArtistGenes(artistID: string, artworkTitle: string, artworkImage: string) {\n    [this.modalTitle, this.modalThumbnail] = [artworkTitle, artworkImage]\n    this.genes = await this.getArtistCategories(artistID)\n  }\n}\n","<div class=\"mx-auto w-75 mb-5\" [hidden]=\"!detailsLoaded && !artworksLoaded\">\n    <ul class=\"nav nav-pills nav-fill\" role=\"tablist\">\n        <li class=\"nav-item\" role=\"presentation\">\n          <button class=\"nav-link active\" id=\"artist-details-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#details\" type=\"button\" role=\"tab\" aria-controls=\"details\" aria-selected=\"true\">Artist Info</button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\" id=\"artworks-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#artworks\" type=\"button\" role=\"tab\" aria-controls=\"artworks\" aria-selected=\"true\">Artworks</button>\n        </li>\n    </ul>\n    <div class=\"tab-content pt-3\">\n        <div class=\"tab-pane fade show active\" id=\"details\" role=\"tabpanel\" aria-labelledby=\"artist-details-tab\">\n            <p class=\"artist-info text-center\">\n                <span class=\"artist-name fs-5\">{{ details.name }}</span>\n                <span class=\"artist-birthyear fs-5\"> ( {{ details.birthday }} - </span>\n                <span class=\"artist-deathyear fs-5\">{{ details.deathday }} )</span>\n            </p>\n            <p class=\"artist-nationality text-center\">{{ details.nationality }}</p>\n            <p class=\"missing-artist-info text-center fs-5\">{{ missing }}</p>\n            <p class=\"artist-biography\">{{ details.biography }}</p>\n        </div>\n        <div class=\"tab-pane fade artist-artworks-list\" id=\"artworks\" role=\"tabpanel\" aria-labelledby=\"artworks-tab\">\n            <div class=\"alert alert-danger w-100 mx-auto\" role=\"alert\" [hidden]=\"artworks.length > 0\">\n                No artworks.\n            </div>              \n            <div class=\"card-group d-flex flex-row flex-nowrap justify-content-center pb-3 mb-1\">\n                <div class=\"card artwork-card\" *ngFor=\"let artwork of artworks\">\n                    <img class=\"card-img-top\" src=\"{{ artwork.image }}\" alt=\"Card image cap\">\n                    <div class=\"card-body pt-1 pb-0\">\n                        <p class=\"card-title text-center fs-6\">{{ artwork.title }}</p>\n                        <p class=\"card-subtitle text-center fs-6\">{{ artwork.date }}</p>\n                    </div>    \n                    <button class=\"btn btn-primary btn-sm artwork-card-button active mb-2 w-75 mx-auto\" data-bs-toggle=\"modal\" data-bs-target=\"#geneModal\" (click)=\"expandArtistGenes(artwork.artistID, artwork.title, artwork.image)\">Categories</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}