{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { ArtistGene } from 'src/models/artist-gene';\nlet ArtistDetailsTabsComponent = class ArtistDetailsTabsComponent {\n  constructor(artistDetailsData, artistArtworksData) {\n    this.artistDetailsData = artistDetailsData;\n    this.artistArtworksData = artistArtworksData;\n    this.artworks = [];\n    this.genes = [];\n    this.details = new ArtistDetails({});\n    this.missing = '';\n    this.modalTitle = '';\n    this.modalThumbnail = '';\n    this.detailsLoaded = false;\n    this.artworksLoaded = false;\n  }\n\n  ngOnInit() {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded]) => {\n      this.detailsLoaded = detailsLoaded;\n      const missing = [];\n      if (!data.biography) missing.push('No Biography');\n      if (!data.birthday) missing.push('No Birth Year');\n      if (!data.deathday) missing.push('No Death Year');\n      if (!data.name) missing.push('No Name');\n      if (!data.nationality) missing.push('No Nationality');\n      this.missing = missing.join(', ');\n      this.details = data;\n    });\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded]) => {\n      this.artworksLoaded = artworksLoaded;\n      this.artworks = data;\n    });\n  }\n\n  getArtistCategories(query) {\n    return _asyncToGenerator(function* () {\n      const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }];\n      return yield fetch(...config).then(response => {\n        return response.json();\n      }).then(parsed => parsed.map(item => {\n        return new ArtistGene(item);\n      }));\n    })();\n  }\n\n  expandArtistGenes(artistID, artworkTitle, artworkImage) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      [_this.modalTitle, _this.modalThumbnail] = [artworkTitle, artworkImage];\n      _this.genes = yield _this.getArtistCategories(artistID);\n    })();\n  }\n\n};\nArtistDetailsTabsComponent = __decorate([Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})], ArtistDetailsTabsComponent);\nexport { ArtistDetailsTabsComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAT,QAAkC,eAAlC;AACA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,SAASC,UAAT,QAA2B,wBAA3B;AASA,IAAaC,0BAA0B,GAAvC,MAAaA,0BAAb,CAAuC;EAUrCC,YAAoBC,iBAApB,EAAyEC,kBAAzE,EAAsH;IAAlG;IAAqD;IATlE,gBAA2B,EAA3B;IACA,aAA2B,EAA3B;IACA,eAAyB,IAAIL,aAAJ,CAAkB,EAAlB,CAAzB;IACA,eAAkB,EAAlB;IACA,kBAAqB,EAArB;IACA,sBAAyB,EAAzB;IACA,qBAAyB,KAAzB;IACA,sBAA0B,KAA1B;EAEoH;;EAE3HM,QAAQ;IACN,KAAKF,iBAAL,CAAuBG,OAAvB,CAA+BC,SAA/B,CAAyC,CAAC,CAACC,IAAD,EAAOC,aAAP,CAAD,KAA2B;MAClE,KAAKA,aAAL,GAAqBA,aAArB;MACA,MAAMC,OAAO,GAAG,EAAhB;MACA,IAAI,CAACF,IAAI,CAACG,SAAV,EAAqBD,OAAO,CAACE,IAAR,CAAa,cAAb;MACrB,IAAI,CAACJ,IAAI,CAACK,QAAV,EAAoBH,OAAO,CAACE,IAAR,CAAa,eAAb;MACpB,IAAI,CAACJ,IAAI,CAACM,QAAV,EAAoBJ,OAAO,CAACE,IAAR,CAAa,eAAb;MACpB,IAAI,CAACJ,IAAI,CAACO,IAAV,EAAgBL,OAAO,CAACE,IAAR,CAAa,SAAb;MAChB,IAAI,CAACJ,IAAI,CAACQ,WAAV,EAAuBN,OAAO,CAACE,IAAR,CAAa,gBAAb;MACvB,KAAKF,OAAL,GAAeA,OAAO,CAACO,IAAR,CAAa,IAAb,CAAf;MACA,KAAKC,OAAL,GAAeV,IAAf;IACD,CAVD;IAWA,KAAKJ,kBAAL,CAAwBE,OAAxB,CAAgCC,SAAhC,CAA0C,CAAC,CAACC,IAAD,EAAOW,cAAP,CAAD,KAA4B;MACpE,KAAKA,cAAL,GAAsBA,cAAtB;MACA,KAAKC,QAAL,GAAgBZ,IAAhB;IACD,CAHD;EAID;;EAEYa,mBAAmB,CAACC,KAAD,EAAc;IAAA;MAC5C,MAAMC,MAAM,GAAG,CACb,yDAAyDD,KAAK,EADjD,EAEb;QAAEE,MAAM,EAAE,KAAV;QAAiBC,OAAO,EAAE;UAAE,gBAAgB;QAAlB;MAA1B,CAFa,CAAf;MAIA,aAAaC,KAAK,CAAC,GAAGH,MAAJ,CAAL,CACVI,IADU,CACLC,QAAQ,IAAG;QAAG,OAAOA,QAAQ,CAACC,IAAT,EAAP;MAAwB,CADjC,EAEVF,IAFU,CAELG,MAAM,IAAIA,MAAM,CAACC,GAAP,CAAYC,IAAD,IAAiB;QAAG,OAAO,IAAIhC,UAAJ,CAAegC,IAAf,CAAP;MAA6B,CAA5D,CAFL,CAAb;IAL4C;EAQ7C;;EAEYC,iBAAiB,CAACC,QAAD,EAAmBC,YAAnB,EAAyCC,YAAzC,EAA6D;IAAA;;IAAA;MACzF,CAAC,KAAI,CAACC,UAAN,EAAkB,KAAI,CAACC,cAAvB,IAAyC,CAACH,YAAD,EAAeC,YAAf,CAAzC;MACA,KAAI,CAACG,KAAL,SAAmB,KAAI,CAAClB,mBAAL,CAAyBa,QAAzB,CAAnB;IAFyF;EAG1F;;AA3CoC,CAAvC;AAAajC,0BAA0B,eALtCH,SAAS,CAAC;EACT0C,QAAQ,EAAE,yBADD;EAETC,WAAW,EAAE,sCAFJ;EAGTC,SAAS,EAAE,CAAC,qCAAD;AAHF,CAAD,CAK6B,GAA1BzC,0BAA0B,CAA1B;SAAAA","names":["Component","ArtistDetails","ArtistGene","ArtistDetailsTabsComponent","constructor","artistDetailsData","artistArtworksData","ngOnInit","message","subscribe","data","detailsLoaded","missing","biography","push","birthday","deathday","name","nationality","join","details","artworksLoaded","artworks","getArtistCategories","query","config","method","headers","fetch","then","response","json","parsed","map","item","expandArtistGenes","artistID","artworkTitle","artworkImage","modalTitle","modalThumbnail","genes","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { Artwork } from 'src/models/artwork';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport { ArtistDetailsDataService } from 'src/shared/artist-details-data.service';\nimport { ArtistArtworksDataService } from 'src/shared/artist-artworks-data.service';\n\n@Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})\nexport class ArtistDetailsTabsComponent implements OnInit {\n  public artworks: Array<Artwork> = []\n  public genes: Array<ArtistGene> = []\n  public details: ArtistDetails = new ArtistDetails({})\n  public missing: string = ''\n  public modalTitle: string = ''\n  public modalThumbnail: string = ''\n  public detailsLoaded: boolean = false\n  public artworksLoaded: boolean = false\n\n  constructor(private artistDetailsData: ArtistDetailsDataService, private artistArtworksData: ArtistArtworksDataService) { }\n\n  ngOnInit(): void {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded])  => {\n      this.detailsLoaded = detailsLoaded\n      const missing = []\n      if (!data.biography) missing.push('No Biography')\n      if (!data.birthday) missing.push('No Birth Year')\n      if (!data.deathday) missing.push('No Death Year')\n      if (!data.name) missing.push('No Name')\n      if (!data.nationality) missing.push('No Nationality')\n      this.missing = missing.join(', ')\n      this.details = data  \n    })\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded])  => {\n      this.artworksLoaded = artworksLoaded\n      this.artworks = data\n    })\n  }\n\n  public async getArtistCategories(query: string) {\n    const config = [\n      `https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`,\n      { method: 'GET', headers: { 'Content-Type': 'application/json' } },  \n    ] as const\n    return await fetch(...config)\n      .then(response => { return response.json() })\n      .then(parsed => parsed.map((item: Object) => { return new ArtistGene(item) }))\n  }\n\n  public async expandArtistGenes(artistID: string, artworkTitle: string, artworkImage: string) {\n    [this.modalTitle, this.modalThumbnail] = [artworkTitle, artworkImage]\n    this.genes = await this.getArtistCategories(artistID)\n  }\n}\n"]},"metadata":{},"sourceType":"module"}