{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { ArtistGene } from 'src/models/artist-gene';\nlet ArtistDetailsTabsComponent = class ArtistDetailsTabsComponent {\n  constructor(artistDetailsData, artistArtworksData) {\n    this.artistDetailsData = artistDetailsData;\n    this.artistArtworksData = artistArtworksData;\n    this.artworks = [];\n    this.genes = [];\n    this.details = new ArtistDetails({});\n    this.missing = '';\n    this.modalTitle = '';\n    this.modalThumbnail = '';\n    this.modalYear = '';\n    this.detailsLoaded = false;\n    this.artworksLoaded = false;\n    this.genesRequested = false;\n    this.showSpinner = false;\n  }\n\n  ngOnInit() {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded]) => {\n      this.detailsLoaded = detailsLoaded;\n      this.details = data;\n    });\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded]) => {\n      this.artworksLoaded = artworksLoaded;\n      this.artworks = data;\n    });\n  }\n\n  toggleSpinner() {\n    this.showSpinner = !this.showSpinner;\n  }\n\n  clearArtworkGenes() {\n    if (this.genesRequested) this.genesRequested = !this.genesRequested;\n    this.genes = [];\n  }\n\n  getArtistCategories(query) {\n    return _asyncToGenerator(function* () {\n      const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }];\n      return yield fetch(...config).then(response => {\n        return response.json();\n      }).then(parsed => parsed.map(item => {\n        return new ArtistGene(item);\n      }));\n    })();\n  }\n\n  expandArtistGenes(artistID, artworkTitle, artworkImage, artworkYear) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.clearArtworkGenes();\n\n      _this.toggleSpinner();\n\n      [_this.modalTitle, _this.modalThumbnail, _this.modalYear] = [artworkTitle, artworkImage, artworkYear];\n      _this.genes = yield _this.getArtistCategories(artistID);\n      _this.genesRequested = true;\n\n      _this.toggleSpinner();\n    })();\n  }\n\n};\nArtistDetailsTabsComponent = __decorate([Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})], ArtistDetailsTabsComponent);\nexport { ArtistDetailsTabsComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAT,QAAkC,eAAlC;AACA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,SAASC,UAAT,QAA2B,wBAA3B;AASA,IAAaC,0BAA0B,GAAvC,MAAaA,0BAAb,CAAuC;EAarCC,YAAoBC,iBAApB,EAAyEC,kBAAzE,EAAsH;IAAlG;IAAqD;IAZlE,gBAA2B,EAA3B;IACA,aAA2B,EAA3B;IACA,eAAyB,IAAIL,aAAJ,CAAkB,EAAlB,CAAzB;IACA,eAAkB,EAAlB;IACA,kBAAqB,EAArB;IACA,sBAAyB,EAAzB;IACA,iBAAoB,EAApB;IACA,qBAAyB,KAAzB;IACA,sBAA0B,KAA1B;IACA,sBAA0B,KAA1B;IACA,mBAAuB,KAAvB;EAEoH;;EAE3HM,QAAQ;IACN,KAAKF,iBAAL,CAAuBG,OAAvB,CAA+BC,SAA/B,CAAyC,CAAC,CAACC,IAAD,EAAOC,aAAP,CAAD,KAA2B;MAClE,KAAKA,aAAL,GAAqBA,aAArB;MACA,KAAKC,OAAL,GAAeF,IAAf;IACD,CAHD;IAIA,KAAKJ,kBAAL,CAAwBE,OAAxB,CAAgCC,SAAhC,CAA0C,CAAC,CAACC,IAAD,EAAOG,cAAP,CAAD,KAA4B;MACpE,KAAKA,cAAL,GAAsBA,cAAtB;MACA,KAAKC,QAAL,GAAgBJ,IAAhB;IACD,CAHD;EAID;;EAEOK,aAAa;IACnB,KAAKC,WAAL,GAAmB,CAAC,KAAKA,WAAzB;EACD;;EAEOC,iBAAiB;IACvB,IAAI,KAAKC,cAAT,EAAyB,KAAKA,cAAL,GAAsB,CAAC,KAAKA,cAA5B;IACzB,KAAKC,KAAL,GAAa,EAAb;EACD;;EAEYC,mBAAmB,CAACC,KAAD,EAAc;IAAA;MAC5C,MAAMC,MAAM,GAAG,CACb,yDAAyDD,KAAK,EADjD,EAEb;QAAEE,MAAM,EAAE,KAAV;QAAiBC,OAAO,EAAE;UAAE,gBAAgB;QAAlB;MAA1B,CAFa,CAAf;MAIA,aAAaC,KAAK,CAAC,GAAGH,MAAJ,CAAL,CACVI,IADU,CACLC,QAAQ,IAAG;QAAG,OAAOA,QAAQ,CAACC,IAAT,EAAP;MAAwB,CADjC,EAEVF,IAFU,CAELG,MAAM,IAAIA,MAAM,CAACC,GAAP,CAAYC,IAAD,IAAiB;QAAG,OAAO,IAAI7B,UAAJ,CAAe6B,IAAf,CAAP;MAA6B,CAA5D,CAFL,CAAb;IAL4C;EAQ7C;;EAEYC,iBAAiB,CAACC,QAAD,EAAmBC,YAAnB,EAAyCC,YAAzC,EAA+DC,WAA/D,EAAkF;IAAA;;IAAA;MAC9G,KAAI,CAACnB,iBAAL;;MACA,KAAI,CAACF,aAAL;;MACA,CAAC,KAAI,CAACsB,UAAN,EAAkB,KAAI,CAACC,cAAvB,EAAuC,KAAI,CAACC,SAA5C,IAAyD,CAACL,YAAD,EAAeC,YAAf,EAA6BC,WAA7B,CAAzD;MACA,KAAI,CAACjB,KAAL,SAAmB,KAAI,CAACC,mBAAL,CAAyBa,QAAzB,CAAnB;MACA,KAAI,CAACf,cAAL,GAAsB,IAAtB;;MACA,KAAI,CAACH,aAAL;IAN8G;EAO/G;;AApDoC,CAAvC;AAAaZ,0BAA0B,eALtCH,SAAS,CAAC;EACTwC,QAAQ,EAAE,yBADD;EAETC,WAAW,EAAE,sCAFJ;EAGTC,SAAS,EAAE,CAAC,qCAAD;AAHF,CAAD,CAK6B,GAA1BvC,0BAA0B,CAA1B;SAAAA","names":["Component","ArtistDetails","ArtistGene","ArtistDetailsTabsComponent","constructor","artistDetailsData","artistArtworksData","ngOnInit","message","subscribe","data","detailsLoaded","details","artworksLoaded","artworks","toggleSpinner","showSpinner","clearArtworkGenes","genesRequested","genes","getArtistCategories","query","config","method","headers","fetch","then","response","json","parsed","map","item","expandArtistGenes","artistID","artworkTitle","artworkImage","artworkYear","modalTitle","modalThumbnail","modalYear","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { Artwork } from 'src/models/artwork';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport { ArtistDetailsDataService } from 'src/shared/artist-details-data.service';\nimport { ArtistArtworksDataService } from 'src/shared/artist-artworks-data.service';\n\n@Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})\nexport class ArtistDetailsTabsComponent implements OnInit {\n  public artworks: Array<Artwork> = []\n  public genes: Array<ArtistGene> = []\n  public details: ArtistDetails = new ArtistDetails({})\n  public missing: string = ''\n  public modalTitle: string = ''\n  public modalThumbnail: string = ''\n  public modalYear: string = ''\n  public detailsLoaded: boolean = false\n  public artworksLoaded: boolean = false\n  public genesRequested: boolean = false\n  public showSpinner: boolean = false\n\n  constructor(private artistDetailsData: ArtistDetailsDataService, private artistArtworksData: ArtistArtworksDataService) { }\n\n  ngOnInit(): void {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded])  => {\n      this.detailsLoaded = detailsLoaded\n      this.details = data  \n    })\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded])  => {\n      this.artworksLoaded = artworksLoaded\n      this.artworks = data\n    })\n  }\n\n  private toggleSpinner() {\n    this.showSpinner = !this.showSpinner\n  }\n\n  private clearArtworkGenes() {\n    if (this.genesRequested) this.genesRequested = !this.genesRequested;\n    this.genes = []\n  }\n  \n  public async getArtistCategories(query: string) {\n    const config = [\n      `https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`,\n      { method: 'GET', headers: { 'Content-Type': 'application/json' } },  \n    ] as const\n    return await fetch(...config)\n      .then(response => { return response.json() })\n      .then(parsed => parsed.map((item: Object) => { return new ArtistGene(item) }))\n  }\n\n  public async expandArtistGenes(artistID: string, artworkTitle: string, artworkImage: string, artworkYear: string) {\n    this.clearArtworkGenes()\n    this.toggleSpinner();\n    [this.modalTitle, this.modalThumbnail, this.modalYear] = [artworkTitle, artworkImage, artworkYear]\n    this.genes = await this.getArtistCategories(artistID)\n    this.genesRequested = true\n    this.toggleSpinner()\n  }\n}\n"]},"metadata":{},"sourceType":"module"}