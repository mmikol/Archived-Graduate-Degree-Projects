{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/shared/artist-details-data.service\";\nimport * as i2 from \"src/shared/artist-artworks-data.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ArtistDetailsTabsComponent_div_0_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" No artworks. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_div_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelement(1, \"img\", 34);\n    i0.ɵɵelementStart(2, \"div\", 35)(3, \"p\", 36);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 37);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function ArtistDetailsTabsComponent_div_0_div_27_div_1_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const artwork_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r8.expandArtistGenes(artwork_r7.id, artwork_r7.title, artwork_r7.image, artwork_r7.date));\n    });\n    i0.ɵɵtext(8, \"Categories\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artwork_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", artwork_r7.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artwork_r7.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r7.date);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtemplate(1, ArtistDetailsTabsComponent_div_0_div_27_div_1_Template, 9, 3, \"div\", 32);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.artworks);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 39);\n    i0.ɵɵelement(2, \"img\", 34);\n    i0.ɵɵelementStart(3, \"div\", 35)(4, \"p\", 36);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const gene_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", gene_r10.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(gene_r10.name);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" No categories. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"ul\", 2)(2, \"li\", 3)(3, \"button\", 4);\n    i0.ɵɵtext(4, \"Artist Info\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 3)(6, \"button\", 5);\n    i0.ɵɵtext(7, \"Artworks\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"p\", 8)(11, \"span\", 9);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 10);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 11);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"p\", 12);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\", 13);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 14);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 15);\n    i0.ɵɵtemplate(24, ArtistDetailsTabsComponent_div_0_div_24_Template, 2, 0, \"div\", 16);\n    i0.ɵɵelementStart(25, \"div\", 17)(26, \"div\", 18);\n    i0.ɵɵtemplate(27, ArtistDetailsTabsComponent_div_0_div_27_Template, 2, 1, \"div\", 19);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"div\", 20)(29, \"div\", 21)(30, \"div\", 22)(31, \"div\", 23);\n    i0.ɵɵelement(32, \"img\", 24);\n    i0.ɵɵelementStart(33, \"p\", 25);\n    i0.ɵɵtext(34);\n    i0.ɵɵelement(35, \"br\");\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"button\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"div\", 27)(39, \"div\", 28);\n    i0.ɵɵelement(40, \"div\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"div\", 17)(42, \"div\", 18);\n    i0.ɵɵtemplate(43, ArtistDetailsTabsComponent_div_0_div_43_Template, 6, 2, \"div\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(44, ArtistDetailsTabsComponent_div_0_div_44_Template, 2, 0, \"div\", 16);\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(ctx_r0.details.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r0.details.birthday, \" - \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.details.deathday, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.nationality);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.missing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.biography);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.artworks.length <= 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.genes);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.modalThumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.modalTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.modalYear);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"hidden\", !ctx_r0.showSpinner);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.genes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.genes.length <= 0 && ctx_r0.genesRequested);\n  }\n}\n\nexport class ArtistDetailsTabsComponent {\n  constructor(artistDetailsData, artistArtworksData) {\n    this.artistDetailsData = artistDetailsData;\n    this.artistArtworksData = artistArtworksData;\n    this.artworks = [];\n    this.genes = [];\n    this.details = new ArtistDetails({});\n    this.missing = '';\n    this.modalTitle = '';\n    this.modalThumbnail = '';\n    this.modalYear = '';\n    this.detailsLoaded = false;\n    this.artworksLoaded = false;\n    this.genesRequested = false;\n    this.showSpinner = false;\n  }\n\n  ngOnInit() {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded]) => {\n      this.detailsLoaded = detailsLoaded;\n      const missing = [];\n      if (!data.biography) missing.push('No Biography');\n      if (!data.birthday) missing.push('No Birth Year');\n      if (!data.deathday) missing.push('No Death Year');\n      if (!data.name) missing.push('No Name');\n      if (!data.nationality) missing.push('No Nationality');\n      this.missing = missing.join(', ');\n      this.details = data;\n    });\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded]) => {\n      this.artworksLoaded = artworksLoaded;\n      this.artworks = data;\n    });\n  }\n\n  toggleSpinner() {\n    this.showSpinner = !this.showSpinner;\n  }\n\n  clearArtworkGenes() {\n    if (this.genesRequested) this.genesRequested = !this.genesRequested;\n    this.genes = [];\n  }\n\n  getArtistCategories(query) {\n    return _asyncToGenerator(function* () {\n      const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }];\n      return yield fetch(...config).then(response => {\n        return response.json();\n      }).then(parsed => parsed.map(item => {\n        return new ArtistGene(item);\n      }));\n    })();\n  }\n\n  expandArtistGenes(artistID, artworkTitle, artworkImage, artworkYear) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.clearArtworkGenes();\n\n      _this.toggleSpinner();\n\n      [_this.modalTitle, _this.modalThumbnail, _this.modalYear] = [artworkTitle, artworkImage, artworkYear];\n      _this.genes = yield _this.getArtistCategories(artistID);\n      _this.genesRequested = true;\n\n      _this.toggleSpinner();\n    })();\n  }\n\n}\n\nArtistDetailsTabsComponent.ɵfac = function ArtistDetailsTabsComponent_Factory(t) {\n  return new (t || ArtistDetailsTabsComponent)(i0.ɵɵdirectiveInject(i1.ArtistDetailsDataService), i0.ɵɵdirectiveInject(i2.ArtistArtworksDataService));\n};\n\nArtistDetailsTabsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ArtistDetailsTabsComponent,\n  selectors: [[\"app-artist-details-tabs\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"mx-auto w-75 mb-5\", 4, \"ngIf\"], [1, \"mx-auto\", \"w-75\", \"mb-5\"], [\"role\", \"tablist\", 1, \"nav\", \"nav-pills\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"id\", \"artist-details-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#details\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"details\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [\"id\", \"artworks-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#artworks\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"artworks\", \"aria-selected\", \"true\", 1, \"nav-link\"], [1, \"tab-content\", \"pt-3\"], [\"id\", \"details\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artist-details-tab\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"artist-info\", \"text-center\"], [1, \"artist-name\", \"fs-5\"], [1, \"artist-birthyear\", \"fs-5\"], [1, \"artist-deathyear\", \"fs-5\"], [1, \"artist-nationality\", \"text-center\"], [1, \"missing-artist-info\", \"text-center\", \"fs-5\"], [1, \"artist-biography\"], [\"id\", \"artworks\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artworks-tab\", 1, \"tab-pane\", \"fade\", \"artist-artworks-list\"], [\"class\", \"alert alert-danger w-100 mx-auto\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"card-columns\", \"pb-3\", \"mb-1\"], [1, \"row\", \"justify-content-center\"], [\"class\", \"col col-lg-4 d-flex align-items-stretch\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"geneModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"geneModal\", \"aria-hidden\", \"true\", 1, \"modal\", \"artwork-genes-list\", \"modal-lg\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-image\", 3, \"src\"], [\"id\", \"geneModal\", 1, \"modal-title\", \"text-start\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"row\", \"mt-2\"], [\"role\", \"status\", 1, \"spinner-border\", \"mx-auto\", 3, \"hidden\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"w-100\", \"mx-auto\"], [1, \"col\", \"col-lg-4\", \"d-flex\", \"align-items-stretch\"], [\"class\", \"card artwork-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"artwork-card\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"pt-1\", \"pb-0\"], [1, \"card-title\", \"text-center\", \"fs-6\"], [1, \"card-subtitle\", \"text-center\", \"fs-6\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#geneModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"artwork-card-button\", \"active\", \"mb-2\", \"w-75\", \"mx-auto\", 3, \"click\"], [1, \"card\", \"gene-card\", \"mb-4\"]],\n  template: function ArtistDetailsTabsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ArtistDetailsTabsComponent_div_0_Template, 45, 14, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.detailsLoaded && ctx.artworksLoaded);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcnRpc3QtZGV0YWlscy10YWJzLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ArtistDetails","ArtistGene","i0","ArtistDetailsTabsComponent","constructor","artistDetailsData","artistArtworksData","ngOnInit","message","subscribe","data","detailsLoaded","missing","biography","push","birthday","deathday","name","nationality","join","details","artworksLoaded","artworks","toggleSpinner","showSpinner","clearArtworkGenes","genesRequested","genes","getArtistCategories","query","config","method","headers","fetch","then","response","json","parsed","map","item","expandArtistGenes","artistID","artworkTitle","artworkImage","artworkYear","modalTitle","modalThumbnail","modalYear","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.ts","/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/src/app/artist-details-tabs/artist-details-tabs.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { Artwork } from 'src/models/artwork';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport { ArtistDetailsDataService } from 'src/shared/artist-details-data.service';\nimport { ArtistArtworksDataService } from 'src/shared/artist-artworks-data.service';\n\n@Component({\n  selector: 'app-artist-details-tabs',\n  templateUrl: './artist-details-tabs.component.html',\n  styleUrls: ['./artist-details-tabs.component.css']\n})\nexport class ArtistDetailsTabsComponent implements OnInit {\n  public artworks: Array<Artwork> = []\n  public genes: Array<ArtistGene> = []\n  public details: ArtistDetails = new ArtistDetails({})\n  public missing: string = ''\n  public modalTitle: string = ''\n  public modalThumbnail: string = ''\n  public modalYear: string = ''\n  public detailsLoaded: boolean = false\n  public artworksLoaded: boolean = false\n  public genesRequested: boolean = false\n  public showSpinner: boolean = false\n\n  constructor(private artistDetailsData: ArtistDetailsDataService, private artistArtworksData: ArtistArtworksDataService) { }\n\n  ngOnInit(): void {\n    this.artistDetailsData.message.subscribe(([data, detailsLoaded])  => {\n      this.detailsLoaded = detailsLoaded\n      const missing = []\n      if (!data.biography) missing.push('No Biography')\n      if (!data.birthday) missing.push('No Birth Year')\n      if (!data.deathday) missing.push('No Death Year')\n      if (!data.name) missing.push('No Name')\n      if (!data.nationality) missing.push('No Nationality')\n      this.missing = missing.join(', ')\n      this.details = data  \n    })\n    this.artistArtworksData.message.subscribe(([data, artworksLoaded])  => {\n      this.artworksLoaded = artworksLoaded\n      this.artworks = data\n    })\n  }\n\n  private toggleSpinner() {\n    this.showSpinner = !this.showSpinner\n  }\n\n  private clearArtworkGenes() {\n    if (this.genesRequested) this.genesRequested = !this.genesRequested;\n    this.genes = []\n  }\n  \n  public async getArtistCategories(query: string) {\n    const config = [\n      `https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`,\n      { method: 'GET', headers: { 'Content-Type': 'application/json' } },  \n    ] as const\n    return await fetch(...config)\n      .then(response => { return response.json() })\n      .then(parsed => parsed.map((item: Object) => { return new ArtistGene(item) }))\n  }\n\n  public async expandArtistGenes(artistID: string, artworkTitle: string, artworkImage: string, artworkYear: string) {\n    this.clearArtworkGenes()\n    this.toggleSpinner();\n    [this.modalTitle, this.modalThumbnail, this.modalYear] = [artworkTitle, artworkImage, artworkYear]\n    this.genes = await this.getArtistCategories(artistID)\n    this.genesRequested = true\n    this.toggleSpinner()\n  }\n}\n","<div class=\"mx-auto w-75 mb-5\" *ngIf=\"detailsLoaded && artworksLoaded\">\n    <ul class=\"nav nav-pills nav-fill\" role=\"tablist\">\n        <li class=\"nav-item\" role=\"presentation\">\n          <button class=\"nav-link active\" id=\"artist-details-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#details\" type=\"button\" role=\"tab\" aria-controls=\"details\" aria-selected=\"true\">Artist Info</button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\" id=\"artworks-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#artworks\" type=\"button\" role=\"tab\" aria-controls=\"artworks\" aria-selected=\"true\">Artworks</button>\n        </li>\n    </ul>\n    <div class=\"tab-content pt-3\">\n        <div class=\"tab-pane fade show active\" id=\"details\" role=\"tabpanel\" aria-labelledby=\"artist-details-tab\">\n            <p class=\"artist-info text-center\">\n                <span class=\"artist-name fs-5\">{{ details.name }}</span>\n                <span class=\"artist-birthyear fs-5\"> ({{ details.birthday }} - </span>\n                <span class=\"artist-deathyear fs-5\">{{ details.deathday }})</span>\n            </p>\n            <p class=\"artist-nationality text-center\">{{ details.nationality }}</p>\n            <p class=\"missing-artist-info text-center fs-5\">{{ missing }}</p>\n            <p class=\"artist-biography\">{{ details.biography }}</p>\n        </div>\n        <div class=\"tab-pane fade artist-artworks-list\" id=\"artworks\" role=\"tabpanel\" aria-labelledby=\"artworks-tab\">\n            <div class=\"alert alert-danger w-100 mx-auto\" role=\"alert\" *ngIf=\"artworks.length <= 0\">\n                No artworks.\n            </div>\n            <div class=\"card-columns pb-3 mb-1\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col col-lg-4 d-flex align-items-stretch\" *ngFor=\"let gene of genes\">\n                <div class=\"card artwork-card\" *ngFor=\"let artwork of artworks\">\n                    <img class=\"card-img-top\" src=\"{{ artwork.image }}\" alt=\"Card image cap\">\n                    <div class=\"card-body pt-1 pb-0\">\n                        <p class=\"card-title text-center fs-6\">{{ artwork.title }}</p>\n                        <p class=\"card-subtitle text-center fs-6\">{{ artwork.date }}</p>\n                    </div>    \n                    <button class=\"btn btn-primary btn-sm artwork-card-button active mb-2 w-75 mx-auto\" data-bs-toggle=\"modal\" data-bs-target=\"#geneModal\" (click)=\"expandArtistGenes(artwork.id, artwork.title, artwork.image, artwork.date)\">Categories</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"modal artwork-genes-list modal-lg fade\" id=\"geneModal\" tabindex=\"-1\" aria-labelledby=\"geneModal\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            <img class=\"modal-image\" src=\"{{ modalThumbnail }}\">\n            <p class=\"modal-title text-start\" id=\"geneModal\">{{ modalTitle }}<br/>{{ modalYear }}</p>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n            <div class=\"row mt-2\">\n                <div class=\"spinner-border mx-auto\" role=\"status\" [hidden]=\"!showSpinner\"></div>      \n            </div>     \n            <div class=\"card-columns pb-3 mb-1\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col col-lg-4 d-flex align-items-stretch\" *ngFor=\"let gene of genes\">\n                        <div class=\"card gene-card mb-4\">\n                            <img class=\"card-img-top\" src=\"{{ gene.image }}\" alt=\"Card image cap\">\n                            <div class=\"card-body pt-1 pb-0\">\n                                <p class=\"card-title text-center fs-6\">{{ gene.name }}</p>\n                            </div>    \n                        </div>\n        \n                    </div>\n                </div>\n            </div>\n            <div class=\"alert alert-danger w-100 mx-auto\" role=\"alert\" *ngIf=\"genes.length <= 0 && genesRequested\">\n                No categories.\n            </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  "]},"metadata":{},"sourceType":"module"}