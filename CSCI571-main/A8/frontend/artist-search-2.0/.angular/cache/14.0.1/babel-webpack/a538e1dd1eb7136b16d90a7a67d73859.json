{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ArtistDetails } from 'src/models/artist-details';\nimport { ArtistGene } from 'src/models/artist-gene';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/shared/artist-details-data.service\";\nimport * as i2 from \"src/shared/artist-artworks-data.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ArtistDetailsTabsComponent_div_0_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" No artworks. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵelement(1, \"img\", 32);\n    i0.ɵɵelementStart(2, \"div\", 33)(3, \"p\", 34);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 35);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function ArtistDetailsTabsComponent_div_0_div_26_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const artwork_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.expandArtistGenes(artwork_r5.id, artwork_r5.title, artwork_r5.image, artwork_r5.date));\n    });\n    i0.ɵɵtext(8, \"Categories\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artwork_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", artwork_r5.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artwork_r5.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r5.date);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"ul\", 15)(2, \"li\", 16)(3, \"button\", 17);\n    i0.ɵɵtext(4, \"Artist Info\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 16)(6, \"button\", 18);\n    i0.ɵɵtext(7, \"Artworks\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 19)(9, \"div\", 20)(10, \"p\", 21)(11, \"span\", 22);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 23);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 24);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"p\", 25);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\", 26);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 27);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 28);\n    i0.ɵɵtemplate(24, ArtistDetailsTabsComponent_div_0_div_24_Template, 2, 0, \"div\", 13);\n    i0.ɵɵelementStart(25, \"div\", 11);\n    i0.ɵɵtemplate(26, ArtistDetailsTabsComponent_div_0_div_26_Template, 9, 3, \"div\", 29);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(ctx_r0.details.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" ( \", ctx_r0.details.birthday, \" - \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.details.deathday, \" )\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.nationality);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.missing);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.details.biography);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.artworks.length <= 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.artworks);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵelement(1, \"img\", 32);\n    i0.ɵɵelementStart(2, \"div\", 33)(3, \"p\", 34);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const gene_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", gene_r8.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(gene_r8.name);\n  }\n}\n\nfunction ArtistDetailsTabsComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" No categories. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let ArtistDetailsTabsComponent = /*#__PURE__*/(() => {\n  class ArtistDetailsTabsComponent {\n    constructor(artistDetailsData, artistArtworksData) {\n      this.artistDetailsData = artistDetailsData;\n      this.artistArtworksData = artistArtworksData;\n      this.artworks = [];\n      this.genes = [];\n      this.details = new ArtistDetails({});\n      this.missing = '';\n      this.modalTitle = '';\n      this.modalThumbnail = '';\n      this.modalYear = '';\n      this.detailsLoaded = false;\n      this.artworksLoaded = false;\n      this.genesRequested = false;\n      this.showSpinner = false;\n    }\n\n    ngOnInit() {\n      this.artistDetailsData.message.subscribe(([data, detailsLoaded]) => {\n        this.detailsLoaded = detailsLoaded;\n        const missing = [];\n        if (!data.biography) missing.push('No Biography');\n        if (!data.birthday) missing.push('No Birth Year');\n        if (!data.deathday) missing.push('No Death Year');\n        if (!data.name) missing.push('No Name');\n        if (!data.nationality) missing.push('No Nationality');\n        this.missing = missing.join(', ');\n        this.details = data;\n      });\n      this.artistArtworksData.message.subscribe(([data, artworksLoaded]) => {\n        this.artworksLoaded = artworksLoaded;\n        this.artworks = data;\n      });\n    }\n\n    toggleSpinner() {\n      this.showSpinner = !this.showSpinner;\n    }\n\n    clearArtworkGenes() {\n      if (this.genesRequested) this.genesRequested = !this.genesRequested;\n      this.genes = [];\n    }\n\n    getArtistCategories(query) {\n      return _asyncToGenerator(function* () {\n        const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }];\n        return yield fetch(...config).then(response => {\n          return response.json();\n        }).then(parsed => parsed.map(item => {\n          return new ArtistGene(item);\n        }));\n      })();\n    }\n\n    expandArtistGenes(artistID, artworkTitle, artworkImage, artworkYear) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.clearArtworkGenes();\n\n        _this.toggleSpinner();\n\n        [_this.modalTitle, _this.modalThumbnail, _this.modalYear] = [artworkTitle, artworkImage, artworkYear];\n        _this.genes = yield _this.getArtistCategories(artistID);\n        _this.genesRequested = true;\n\n        _this.toggleSpinner();\n      })();\n    }\n\n  }\n\n  ArtistDetailsTabsComponent.ɵfac = function ArtistDetailsTabsComponent_Factory(t) {\n    return new (t || ArtistDetailsTabsComponent)(i0.ɵɵdirectiveInject(i1.ArtistDetailsDataService), i0.ɵɵdirectiveInject(i2.ArtistArtworksDataService));\n  };\n\n  ArtistDetailsTabsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArtistDetailsTabsComponent,\n    selectors: [[\"app-artist-details-tabs\"]],\n    decls: 17,\n    vars: 7,\n    consts: [[\"class\", \"mx-auto w-75 mb-5\", 4, \"ngIf\"], [\"id\", \"geneModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"geneModal\", \"aria-hidden\", \"true\", 1, \"modal\", \"artwork-genes-list\", \"modal-xl\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-image\", 3, \"src\"], [\"id\", \"geneModal\", 1, \"modal-title\", \"text-start\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"row\", \"mt-2\"], [\"role\", \"status\", 1, \"spinner-border\", \"mx-auto\", 3, \"hidden\"], [1, \"card-columns\", \"pb-3\", \"mb-1\"], [\"class\", \"card gene-card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"alert alert-danger w-100 mx-auto\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"mx-auto\", \"w-75\", \"mb-5\"], [\"role\", \"tablist\", 1, \"nav\", \"nav-pills\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"id\", \"artist-details-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#details\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"details\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [\"id\", \"artworks-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#artworks\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"artworks\", \"aria-selected\", \"true\", 1, \"nav-link\"], [1, \"tab-content\", \"pt-3\"], [\"id\", \"details\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artist-details-tab\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"artist-info\", \"text-center\"], [1, \"artist-name\", \"fs-5\"], [1, \"artist-birthyear\", \"fs-5\"], [1, \"artist-deathyear\", \"fs-5\"], [1, \"artist-nationality\", \"text-center\"], [1, \"missing-artist-info\", \"text-center\", \"fs-5\"], [1, \"artist-biography\"], [\"id\", \"artworks\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artworks-tab\", 1, \"tab-pane\", \"fade\", \"artist-artworks-list\"], [\"class\", \"card artwork-card\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"w-100\", \"mx-auto\"], [1, \"card\", \"artwork-card\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"pt-1\", \"pb-0\"], [1, \"card-title\", \"text-center\", \"fs-6\"], [1, \"card-subtitle\", \"text-center\", \"fs-6\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#geneModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"artwork-card-button\", \"active\", \"mb-2\", \"w-75\", \"mx-auto\", 3, \"click\"], [1, \"card\", \"gene-card\"]],\n    template: function ArtistDetailsTabsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ArtistDetailsTabsComponent_div_0_Template, 27, 8, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵelement(5, \"img\", 5);\n        i0.ɵɵelementStart(6, \"p\", 6);\n        i0.ɵɵtext(7);\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"button\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 9);\n        i0.ɵɵelement(13, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵtemplate(15, ArtistDetailsTabsComponent_div_15_Template, 5, 2, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, ArtistDetailsTabsComponent_div_16_Template, 2, 0, \"div\", 13);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.detailsLoaded && ctx.artworksLoaded);\n        i0.ɵɵadvance(5);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.modalThumbnail, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.modalTitle);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.modalYear);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"hidden\", !ctx.showSpinner);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.genes);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.genes.length <= 0 && ctx.genesRequested);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf]\n  });\n  return ArtistDetailsTabsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}