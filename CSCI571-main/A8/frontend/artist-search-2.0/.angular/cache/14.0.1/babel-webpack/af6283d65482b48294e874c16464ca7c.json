{"ast":null,"code":"import _asyncToGenerator from \"/Users/miliano/Documents/mmikol.github.io/A8/frontend/artist-search-2.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ArtistGene } from 'src/models/artist-gene';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/shared/artist-details-data.service\";\nimport * as i2 from \"src/shared/artist-artworks-data.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ArtistDetailsTabsComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelement(1, \"img\", 29);\n    i0.ɵɵelementStart(2, \"div\", 30)(3, \"p\", 31);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 32);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function ArtistDetailsTabsComponent_div_27_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const artwork_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.expandArtistGenes(artwork_r1.artistID));\n    });\n    i0.ɵɵtext(8, \"Categories\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artwork_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", artwork_r1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artwork_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artwork_r1.date);\n  }\n}\n\nexport let ArtistDetailsTabsComponent = /*#__PURE__*/(() => {\n  class ArtistDetailsTabsComponent {\n    constructor(artistDetailsData, artistArtworksData) {\n      this.artistDetailsData = artistDetailsData;\n      this.artistArtworksData = artistArtworksData;\n    }\n\n    ngOnInit() {\n      this.artistDetailsData.message.subscribe(data => {\n        const missing = [];\n        if (!data.biography) missing.push('No Biography');\n        if (!data.birthday) missing.push('No Birth Year');\n        if (!data.deathday) missing.push('No Death Year');\n        if (!data.name) missing.push('No Name');\n        if (!data.nationality) missing.push('No Nationality');\n        this.missing = missing.join(', ');\n        this.details = data;\n      });\n      this.artistArtworksData.message.subscribe(data => this.artworks = data);\n    }\n\n    getArtistCategories(query) {\n      return _asyncToGenerator(function* () {\n        const config = [`https://artistsearchbackend.wl.r.appspot.com/genes?id=${query}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }];\n        return yield fetch(...config).then(response => {\n          return response.json();\n        }).then(parsed => parsed.map(item => {\n          return new ArtistGene(item);\n        }));\n      })();\n    }\n\n    expandArtistGenes(artistID) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        const artistGenes = yield _this.getArtistCategories(artistID);\n      })();\n    }\n\n  }\n\n  ArtistDetailsTabsComponent.ɵfac = function ArtistDetailsTabsComponent_Factory(t) {\n    return new (t || ArtistDetailsTabsComponent)(i0.ɵɵdirectiveInject(i1.ArtistDetailsDataService), i0.ɵɵdirectiveInject(i2.ArtistArtworksDataService));\n  };\n\n  ArtistDetailsTabsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArtistDetailsTabsComponent,\n    selectors: [[\"app-artist-details-tabs\"]],\n    decls: 42,\n    vars: 8,\n    consts: [[1, \"mx-auto\", \"w-75\", \"mb-5\"], [\"role\", \"tablist\", 1, \"nav\", \"nav-pills\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"id\", \"artist-details-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#details\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"details\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [\"id\", \"artworks-tab\", \"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#artworks\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"artworks\", \"aria-selected\", \"true\", 1, \"nav-link\"], [1, \"tab-content\", \"pt-3\"], [\"id\", \"details\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artist-details-tab\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [1, \"artist-info\", \"text-center\"], [1, \"artist-name\", \"fs-5\"], [1, \"artist-birthyear\", \"fs-5\"], [1, \"artist-deathyear\", \"fs-5\"], [1, \"artist-nationality\", \"text-center\"], [1, \"missing-artist-info\", \"text-center\", \"fs-5\"], [1, \"artist-biography\"], [\"id\", \"artworks\", \"role\", \"tabpanel\", \"aria-labelledby\", \"artworks-tab\", 1, \"tab-pane\", \"fade\", \"artist-artworks-list\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"w-100\", \"mx-auto\", 3, \"hidden\"], [1, \"card-group\", \"d-flex\", \"flex-row\", \"flex-nowrap\", \"justify-content-center\", \"pb-3\", \"mb-1\"], [\"class\", \"card artwork-card\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"exampleModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"], [1, \"card\", \"artwork-card\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"pt-1\", \"pb-0\"], [1, \"card-title\", \"text-center\", \"fs-6\"], [1, \"card-subtitle\", \"text-center\", \"fs-6\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#exampleModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"artwork-card-button\", \"active\", \"mb-2\", \"w-75\", \"mx-auto\", 3, \"click\"]],\n    template: function ArtistDetailsTabsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"ul\", 1)(2, \"li\", 2)(3, \"button\", 3);\n        i0.ɵɵtext(4, \"Artist Info\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"li\", 2)(6, \"button\", 4);\n        i0.ɵɵtext(7, \"Artworks\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\", 6)(10, \"p\", 7)(11, \"span\", 8);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"span\", 9);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"span\", 10);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"p\", 11);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\", 12);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"p\", 13);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 14)(24, \"div\", 15);\n        i0.ɵɵtext(25, \"No artworks.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 16);\n        i0.ɵɵtemplate(27, ArtistDetailsTabsComponent_div_27_Template, 9, 3, \"div\", 17);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"div\", 18)(29, \"div\", 19)(30, \"div\", 20)(31, \"div\", 21)(32, \"h5\", 22);\n        i0.ɵɵtext(33, \"Modal title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"button\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 24);\n        i0.ɵɵtext(36, \" ... \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 25)(38, \"button\", 26);\n        i0.ɵɵtext(39, \"Close\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"button\", 27);\n        i0.ɵɵtext(41, \"Save changes\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate(ctx.details.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" ( \", ctx.details.birthday, \" - \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.details.deathday, \" )\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.details.nationality);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.missing);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.details.biography);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.artworks.length > 0);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.artworks);\n      }\n    },\n    dependencies: [i3.NgForOf]\n  });\n  return ArtistDetailsTabsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}